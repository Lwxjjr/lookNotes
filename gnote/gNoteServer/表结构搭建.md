## 定义数据库配置项
```go
// config_mysql.go

type Mysql struct {  
    Host     string `json:"host"`     // 服务器地址  
    Port     int    `json:"port"`     // 端口  
    Config   string `json:"config"`   // 高级配置  
    DB       string `json:"db"`       // 数据库名称  
    Username string `json:"username"` // 用户名  
    Password string `json:"password"` // 密码  
    LogLevel string `json:"logLevel"` // 是否开启Gorm全局日志  
}
```
在enter.go中添加配置项
```go
// config/enter.go
type Config struct {  
    System System `yaml:"system"`  
    Mysql  Mysql  `yaml:"mysql"`  
    Redis  Redis  `yaml:"redis"`  
    Jwt    Jwt    `yaml:"jwt"`  
}
```

## 初始化数据库


## 表：

![[Pasted image 20250404213314.png]]

### 核心表：
1. 用户表 - UserModel
2. 角色表 - RoleModel
3. 文档表 - DocModel
4. 角色文档表 - RoleDocModel
### 连接表：
1. 角色-文档表
2. 用户-收藏-文档表
3. 用户-文档-表

---
## 表详细
### 1. 用户表
```
UserModel{
	UserName   // 用户名称
	Password   // 密码
	Avatar     // 头像
	NickName   // 昵称
	Email      // 邮箱
	Token      
	Addr       // 地址
	RoleID     // 用户对应角色ID
	RoleModel  // 用户对应角色
}
```
### 2. 角色表
```
RoleModle {
	Title      // 名称
	Pwd        // 密码
	IsSystem   // 是否为超级管理员
	DocsList   // 角色拥有文档
}
```
### 3. 文档表
```
DocModel {
	Title        // 文档标题
	Content      // 文档内容
	DiggContent  // 点赞量
	LookCoutent  // 浏览量
	Key 
	ParentID     // 父文档ID
	ParentModel  // 父文档（外键ParentID）
	Child        // 子文档（外键ParentID）
	FreeContent  // 预览部分
	UserCollDOCList
}
```

### 4. 角色文档表
```
RoleDocMode{ 
	Role
	RoleID      // 角色ID
	RoleModel   // 角色信息
	DocID       // 文档ID
	DocModel    // 文档
	Pwd         // 密码（启用密码，优先级：角色文档密码 > 角色密码）
	FreeContent // 试看内容（优先级：角色文档试看  > 文档试看字段 > 文档按照特殊字符分隔的试看）
	Sort        // 排序
}
```

### 5. 用户收藏表
```
UserCollDocModel{
	DocID      // 文档ID
	DocModel   // 文档
	UserID     // 用户ID
	UserModel  // 用户（外键 UserID）
}
```